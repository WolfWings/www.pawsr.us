Session State:

userid: <integer, authenticated internal userid>
login.<service>: 

Direct HREF to login URLs, skip one redirect
/			Main Homepage
	If logged out:
		Describe website

	Provide links to sub-systems:
		Login Management (link to /login)
		Profile Management (link to /profile)

/login			Main login endpoint

	List servics supported

	For all services:
		If 'login.${service}' exists:
			Check status

			If 'waiting' status:
				NoJS Meta-refresh to myself
				Add CSS for 'pinwheel' state to icon
				Link: Disabled
				JavaScript:
					Disable meta-refresh
					AJAX to /ajax/login-status on constant loop

			If 'error' status:
				Delete cookie
				Create 'error_${service}' cookie w/ error code
				Add CSS for 'error' state to icon
				Link: Leads to /errors/<service>/<error code>

			If 'just added' status:
				Delete cookie
				Add CSS for 'new addition' state to icon
				Mark service as a whole as 'verified' for this session
				Link: Leads to /services/<service>/<service-specific-UID>

			If 'verified' status:
				Delete cookie
				Add CSS for 'verified' state to icon
				Mark service as a whole as 'verified' for this session
				Mark service-specific-UID as 'logged in' for this session
				Link: Leads to /services/<service>/<service-specific-UID>

		If 'login.${service}' does NOT exist:

			Link: Leads to /services/<service>/<service-specific-UID>

			If 'service.${service}' exists on this session:
				If ssUID matches 'service.${service}' then:
					Add CSS for 'verified' state to icon
				If ssUID does NOT match 'service.${service}' then:
					Add 'cannot click' state to icon

		Default:
			Add CSS for 'add/login' state to icon
			Link: Leads to service-specific login URL

/prelogin/<service>	Support URL for oauth1-based login mechanisms

	Create UUID

	Set 'prelogin_${service}_${UUID}' key on memcached to 'in progress'

	Set 'prelogin_${service}' session variable to UUID

	NoJS Meta-refresh to myself

	JS queries /ajax/prelogin/${service} on constant loop instead

/login/<service>	Return callback for each service

	Set 'service_${service}' session variable

	Set memcache value for '${session}:${service}' to 'Processing' state

	Redirect client to '/login'

	Begin processing request

	On completion, update memcache value

	If result is successful, update database
